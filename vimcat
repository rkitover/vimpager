#!/bin/sh
version_tag=2.06

# FIND REAL PARENT DIRECTORY
link=$0

while [ -h "$link" ]; do
    ls0=`ls -l "$link"`
    new_link=`expr "$ls0" : '.* -> \(.*\)$'`
    if expr "$new_link" : '/.*' > /dev/null; then
        link=$new_link
    else
        link=`dirname "$link"`/$new_link
    fi
done

project_dir=`dirname "$link"`
# END OF FIND REAL PARENT DIRECTORY

. "$project_dir/inc/prologue.sh"

[ -n "$ZSH_VERSION" ] && emulate -R sh 2>/dev/null # force zsh into full POSIX

version="$(cd "$project_dir" && git describe 2>/dev/null) (git)" || version="$version_tag (checkout)"
runtime=$project_dir

. "$project_dir/inc/vimcat_functions.sh"
. "$project_dir/inc/common_functions.sh"

set_system_vars
select_vim_executable
parse_command_line_options_1 "$@"
find_tmp_directory
create_tmp_directory
install_trap
create_fifo

main "$@"

# vim: sw=4 et ft=sh
